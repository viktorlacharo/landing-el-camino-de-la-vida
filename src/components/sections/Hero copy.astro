<!-- ---
import Container from "@/components/layout/Container.astro";
---

<section id="hero" class="h-screen w-full relative scale-110">
  <div id="hero-mask">
    <picture>
      <img
        src="/bg_image.webp"
        id="bg-img"
        alt="El camino de la vida"
        class="h-full w-full overflow-hidden object-cover"
      />
    </picture>
  </div>

  <Container class="h-full absolute py-32 w-full inset-0">
    <div class="flex flex-col justify-between h-full px-4">
      <div class="flex flex-col gap-4">
        <h1 class="text-white font-dm text-4xl uppercase flex flex-col gap-2">
          <span class="split">
            El camino de <br />
            <span class="text-golden/90">la vida</span>
          </span>
        </h1>

        <div class="w-11/12 bg-white/60 h-px"></div>
      </div>

      <div class="flex flex-col items-end gap-4 w-full">
        <h2
          class="text-right flex flex-wrap gap-2 font-dm border-t split pt-2 border-t-white/80 text-white/70 text-xl font-light tracking-wide leading-normal"
        >
          Sanación y transformación interior
        </h2>
      </div>
    </div>
  </Container>
</section>
<div class="test h-20 w-full"></div>

<style>
  h1 > span {
    text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
    font-weight: 300;
    line-height: normal;
    letter-spacing: 1.8px;
  }

  .test {
    background-image: url("/Test.svg");
    background-repeat: no-repeat;
    background-position: center;
    mask-position: center center;
    background-size: clamp(6000vh, 5500%, 0vh);
    mask-repeat: no-repeat;
    mask-size: clamp(6000vh, 5500%, 0vh);
    transition: mask-position 0.5s ease-out;
    mask-origin: content-box;
    opacity: 0;
  }

  /* h1 span > span > div {
    background: linear-gradient(
      90deg,
      var(--color-golden, #be772c) 0%,
      #999 100%
    );
    background-clip: text;
    -webkit-background-clip: text;
   
    text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);

    font-weight: 400;

    letter-spacing: 0.96px; 
  } */
  /* 
  h2 {
    text-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);
  } */

  #hero {
    background: white;
    mask-image: url("/Nua_Relax_sm.svg");

    mask-position: center center;
    mask-repeat: no-repeat;
    mask-size: clamp(6000vh, 5500%, 0vh);
    transition: mask-position 0.5s ease-out;
    mask-origin: content-box;
    background-repeat: no-repeat;
  }
</style>
<script>
  import { gsap } from "gsap";
  import { SplitText } from "gsap/SplitText";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(SplitText, ScrollTrigger);

  // Create split text for both elements
  let splits = SplitText.create(".split", { type: "words" });

  let tl = gsap.timeline({
    defaults: {
      duration: 1,
      ease: "power2.out",
    },
  });

  // Handle both single instance and array of instances
  if (Array.isArray(splits)) {
    // Animate first split (h1)
    tl.from(splits[0].words, {
      duration: 1,
      y: 20,
      filter: "blur(10px)",
      autoAlpha: 0,
      stagger: 0.1,
    })
      // Animate second split (h2) after the first one
      .from(
        splits[1].words,
        {
          duration: 1,
          y: 20,
          filter: "blur(10px)",
          autoAlpha: 0,
          stagger: 0.1,
        },
        "+=0.5",
      ); // 0.2 seconds delay after first animation
  } else {
    // Fallback for single element
    tl.from(splits.words, {
      duration: 1,
      y: 20,
      filter: "blur(10px)",
      autoAlpha: 0,
      stagger: 0.1,
    });
  }

  let maskTl = gsap.timeline({
    ease: "power2.out",
    scrollTrigger: {
      trigger: "#hero",
      start: "top top",
      end: "+=75%",
      scrub: 1,
      pin: true,
      markers: true,
    },
  });

  maskTl
    .to("#hero", {
      scale: 1.1,
      duration: 1,
    })
    .to(
      "#bg-img",
      {
        opacity: 0,
        duration: 0.3,
      },
      "<0.7",
    )
    .to(
      ".split",
      {
        opacity: 0,
        duration: 0.3,
      },
      "<",
    )
    .to(
      "#hero",
      {
        maskSize: "clamp(20vh, 35%, 30vh)",
        maskPosition: "center center",
        duration: 1,
      },
      0.15,
    )
    
    ;
</script> -->
