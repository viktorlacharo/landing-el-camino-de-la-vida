---
import Layout from "../layouts/Layout.astro";
import Header from "../components/layout/Header.astro";
import Footer from "../components/layout/Footer.astro";
import Hero from "../components/sections/Hero.astro";
import Therapies from "../components/sections/Therapies.astro";
import Accommodations from "../components/sections/Accommodations.astro";
import Packs from "../components/sections/Packs.astro";
import Workshops from "../components/sections/Workshops.astro";
import Contact from "../components/sections/Contact.astro";
---

<Layout
  title="El Camino de la Vida - Terapias Alternativas y Alojamiento Terapéutico en Tarragona"
  description="Transforma tu vida con nuestras terapias espirituales y alojamiento sagrado en Tarragona. Tarot evolutivo, sanación energética, retiros y experiencias transformadoras auténticas."
>
  <Header />
  <main class="scroll-smooth">
    <!-- <Hero /> -->
    <Accommodations />
    <Workshops />
    <Packs />
    <Therapies />
    <Contact />
  </main>
  <Footer />
</Layout>

<style is:global>
  .golden-gradient {
    background: linear-gradient(
      90deg,
      var(--color-golden) 0%,
      var(--color-golden) 25%,
      #feb26b 50%,
      var(--color-golden) 75%,
      var(--color-golden) 100%
    );
    background-size: 200% 100%;
    background-position: 100% 0;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: background-position 0.3s ease;
  }
</style>

<script>
  import Lenis from "lenis";
  import "lenis/dist/lenis.css";
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  // Register GSAP plugins
  gsap.registerPlugin(ScrollTrigger);

  // Initialize Lenis for smooth scrolling
  const isMobile = window.innerWidth <= 768;

  const lenis = new Lenis({
    lerp: isMobile ? 0.05 : 0.07, // Smoother on mobile
    wheelMultiplier: 1,
    touchMultiplier: 1.2, // Softer touch response
    autoResize: true,
    gestureOrientation: "vertical",
    smoothWheel: true,

    syncTouch: true, // NUEVO: Sincroniza movimientos multitouch
  });

  // Make Lenis globally accessible for mobile menu
  window.lenis = lenis;

  // CRITICAL: Sync Lenis with GSAP ScrollTrigger
  lenis.on("scroll", ScrollTrigger.update);

  // Add Lenis's requestAnimationFrame method to GSAP's ticker
  gsap.ticker.add((time) => {
    lenis.raf(time * 1000); // Convert time from seconds to milliseconds
  });

  // Disable lag smoothing in GSAP to prevent delays
  gsap.ticker.lagSmoothing(0);

  // Listen for scroll events (optional, for debugging or custom functionality)
  lenis.on("scroll", (e) => {
    // console.log(e)
    // console.log(e.scroll, e.limit, e.velocity, e.direction, e.progress);
  });
</script>
